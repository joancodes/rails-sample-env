%h1.text-2xl.font-bold.mb-4 Transaction Summary for #{@company.name}

= form_tag summary_company_transactions_path(@company), method: :get, class: "mb-4 flex gap-3 items-end" do
  .flex-1
    %label.block.text-gray-700.font-bold Start Date:
    = date_field_tag :start_date, params[:start_date], class: "rounded border-gray-300 shadow-sm w-full"
  .flex-1
    %label.block.text-gray-700.font-bold End Date:
    = date_field_tag :end_date, params[:end_date], class: "rounded border-gray-300 shadow-sm w-full"
  .flex-1
    %label.block.text-gray-700.font-bold VAT:
    = select_tag :tax_inclusive, options_for_select([["Excl. VAT", false], ["Incl. VAT", true]], params[:tax_inclusive]), class: "rounded border-gray-300 shadow-sm w-full"
  .self-end
    = submit_tag "Filter", class: "px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"

%table.w-full.border-collapse.mt-4
  %thead
    %tr.bg-gray-200
      %th.p-2.border Customer
      %th.p-2.border Item
      %th.p-2.border Total (Excl. VAT)
      %th.p-2.border Total (Incl. VAT)
  %tbody
    - if @summary.present?
      - @summary.each do |row|
        %tr.hover:bg-gray-100
          %td.p-2.border= row['customer_name']
          %td.p-2.border= row['item_name']
          %td.p-2.border= number_to_currency(row['total_excl_vat'])
          %td.p-2.border= number_to_currency(row['total_incl_vat'])
    - else
      %tr
        %td.p-4.text-center.border.colspan-4 No transactions found for the selected period.

= paginate @summary

%br/
= link_to "Back", company_transactions_path(@company), class: "bg-gray-500 text-white visited:text-white px-4 py-2 rounded hover:bg-gray-700 no-underline"
